import type { PersistentStorage } from "../../../types.js";
import type { AzureMonitorExporterOptions } from "../../../config.js";
import type { CustomerSDKStatsMetrics } from "../../../export/statsbeat/customerSDKStats.js";
/**
 * File system persist class.
 * @internal
 */
export declare class FileSystemPersist implements PersistentStorage {
    private _options?;
    private _customerSDKStatsMetrics?;
    static TEMPDIR_PREFIX: string;
    static FILENAME_SUFFIX: string;
    fileRetemptionPeriod: number;
    cleanupTimeOut: number;
    maxBytesOnDisk: number;
    private _enabled;
    private _tempDirectory;
    private _fileCleanupTimer;
    private _instrumentationKey;
    constructor(instrumentationKey: string, _options?: AzureMonitorExporterOptions | undefined, _customerSDKStatsMetrics?: CustomerSDKStatsMetrics | undefined);
    push(value: unknown[]): Promise<boolean>;
    shift(): Promise<unknown>;
    /**
     * Check for temp telemetry files
     * reads the first file if exist, deletes it and tries to send its load
     */
    private _getFirstFileOnDisk;
    /**
     * Stores telemetry data to disk.
     * @param payload - The telemetry data to store.
     * @param envelopeLength -The length of the telemetry envelope.
     * @returns A promise that resolves to true if the data was stored successfully, false otherwise.
     */
    private _storeToDisk;
    private _fileCleanupTask;
}
/**
 * Return the deterministic local storage path for a given instrumentation key.
 *
 * On shared Linux hosts the first user to create `/tmp/Microsoft/AzureMonitor` can
 * block others because the directory inherits that user's `umask`. This is avoided by
 * inserting a hash of the instrumentation key, user name, process name, and
 * application directory, giving each user their own subdirectory, e.g.
 * `/tmp/Microsoft-AzureMonitor-1234...../opentelemetry-nodejs-<ikey>`.
 *
 * @param instrumentationKey - Application Insights instrumentation key.
 * @param storageDirectory - Optional custom storage directory path. If not provided, system temp directory is used.
 * @returns Absolute path to the storage directory.
 * @internal
 */
export declare function getStorageDirectory(instrumentationKey: string, storageDirectory: string | undefined): string;
//# sourceMappingURL=fileSystemPersist.d.ts.map